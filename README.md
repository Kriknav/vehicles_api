# vehicles_api
Sample RESTful API for managing vehicles

This is a sample web API written in .NET Core 2.0 along with a unit test.  It demonstrates some basic web API concepts, inlucding CRUD (Create, Read, Update and Delete) functionality using Entity Framework (which in this case is backed by and in-memory database). The code also demonstrates some basic validation and filtering of web APIs.  This code is not production-ready and you should read the warnings below before adopting or using this code.

Basic Functionality
-------------------

A Vehicle is defined as having the following properties:

* **Id** [*int*] (generated by Entity Framework)
* **Year** [*int*]
* **Make** [*string*]
* **Model** [*string*]

And the operations that can be performed, as well as the API endpoints, are:

* **GET /vehicles** -- Will return all vehicles in the database. These can be filtered (explained later)
* **GET /vehicles/{id}** -- Will return only the vehicle whose Id is equal to {id}, or none if no vehicle is found with that Id
* **PUT /vehicle** -- Will update an existing vechicle, if the Id provided is found to exist, or will add a new vehicle otherwise
* **POST /vehicle** -- Will add a new vehicle to the database
* **DELETE /vehicle/{id}** -- Will delete the vehicle with the Id equal to {id}, if it is found

Validations
-----------

When sending vehicles to the API (using POST or PUT operations) the following validations will be performed:

1. The Year must be between 1950 and 2050
2. The Make must be a non-empty string
3. The Model must bea non-empty string

Filtering
---------

When getting all the vehicles in the database, filtering can be performed using the following query string parameters:

* **Year** -- will return only vehicles with supplied year value (takes precedence over other year filters)
* **MinYear** -- will return only vehicles whose year is equal to or greater than the supplied year value
* **MaxYear** -- will return only vehicles whose year is equal to or less than the supplied year value
* **Make** -- will return only vehicles whose Make is equal to the supplied value (case-insensitive, takes precedence over other make filters)
* **MakeContains** -- will return only vehicles whose Make contains the supplied value (case-insensitive) 
* **Model** -- will return only vehicles whose Model is equal to the supplied value (case-insensitive, takes precedence over other model filters)
* **ModelContains** -- will return only vehicles whose Model contains the supplied value (case-insensitive)

Warnings
--------

As stated previously, this code is not production-ready. It was written as an example and to work with certain specifications. In order to prepare this code for production, the following items should be reviewed and corrected before deploying:

1. In the Startup.cs file, the Cross-Origin Resource Sharing (CORS) settings should be reviewed and modified. The code is currently setup to allow execution on any domain with any headers using any method.
2. The API uses Entity Framework's In-Memory database. This was designed for testing purposes in mind and it is recommended to modify the code to use some other database system.
3. The PUT functionality should be reviewed, as there are two ways to handle a Not Found Id during an update request. Currently the code will add the vehicle as if it were new, but if returning 404 HTTP error response is desired, the code will need to be modified.
